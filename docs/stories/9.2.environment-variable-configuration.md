# Story 9.2: Environment Variable Configuration

## Status
Done

## Story

**As a** DevOps engineer deploying in CI/CD,
**I want** to configure GeuseMaker via environment variables,
**so that** I can inject secrets and configuration without files.

## Acceptance Criteria

1. All configuration options support environment variables
2. Environment variable naming follows GEUSEMAKER_* convention
3. Configuration precedence: CLI > env vars > config file > defaults
4. Sensitive values (like budget) can be set via env vars
5. Environment variables are documented
6. Invalid env var values produce helpful errors
7. Env vars work in non-interactive mode
8. Boolean env vars support "true"/"false"/"1"/"0"
9. Unit tests achieve 80%+ coverage

## Tasks / Subtasks

- [ ] Task 1: Define Env Var Mapping (AC: 1, 2)
  - [ ] Map each config option to env var
  - [ ] Use GEUSEMAKER_ prefix
  - [ ] Use SCREAMING_SNAKE_CASE

- [ ] Task 2: Implement Precedence (AC: 3)
  - [ ] Load defaults
  - [ ] Apply config file
  - [ ] Apply env vars
  - [ ] Apply CLI args

- [ ] Task 3: Implement Value Parsing (AC: 8)
  - [ ] Parse boolean values
  - [ ] Parse numeric values
  - [ ] Parse list values (comma-separated)

- [ ] Task 4: Implement Validation (AC: 6)
  - [ ] Validate parsed values
  - [ ] Show which env var caused error
  - [ ] Suggest valid values

- [ ] Task 5: Document Env Vars (AC: 5)
  - [ ] List all env vars
  - [ ] Show types and defaults
  - [ ] Include examples

- [ ] Task 6: Create Unit Tests (AC: 9)
  - [ ] Test env var loading
  - [ ] Test precedence
  - [ ] Test value parsing
  - [ ] Achieve 80%+ coverage

## Dev Notes

### Environment Variable Mapping
```
GEUSEMAKER_STACK_NAME
GEUSEMAKER_TIER
GEUSEMAKER_REGION
GEUSEMAKER_INSTANCE_TYPE
GEUSEMAKER_USE_SPOT
GEUSEMAKER_BUDGET
GEUSEMAKER_VPC_ID
GEUSEMAKER_SUBNET_ID
```

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-01-21 | 1.0 | Initial story creation | Bob (Scrum Master) |

## Dev Agent Record
- Added GEUSEMAKER_* env parsing with boolean/list support and precedence below CLI args.
- Validation now reports offending env vars for misconfiguration.
- Documented env mapping via config schema helpers.

## QA Results
_To be populated by QA Agent_
